{"ast":null,"code":"var _jsxFileName = \"/Users/choonwheepeh/demo/src/components/aForm.js\";\nimport React from \"react\";\nimport { formDataToObject } from \"./utils\";\n/*\nDefault Mode\nAForm will communicate to all its field children which mode to render by default. This allow the convinience of setting \nthe default render mode for its field children if the children does not have its own mode or settings provided. \nThis way we don't need to specify mode for every single field repeatedly if most fields should be rendered in a similar \nrender mode. Functional mode mapping to render mode also allow is to define custom functional mode mappings based on functional \nFunctional mode can support custom values (as long as corresponding mappings are provides) but render mode does not s\nupport custom values (since the field would not know what to actually render), so the only supported render mode values \nare [\"readOnly\"|\"edit\"|\"disabled\"|\"hidden\"].\n\nAForm gets can get mappings via \n1) defaultModeMapping prop that is passed in, \n2) via calling a backend service specified by the defaultModeMappingService\n3) predefined fallback mappings\nthe mappings are then merged in the above order of precedence when there are duplicate functional modes in the mapping. \nThis means that if the defaultModeMapping from prop and from the mapping via the service have the same functional prop defined, \nthe functional mode mapping defined by the defaultModeMapping from props will override the same mapping from the service.\n\ndefaultModeMapping: allow mappings to be specified in via props. modeMapping is an object that is used like a map. \nEach property name is the functional mode and the property value is the render mode that the field need to render.\n\ndefaultModeMappingService: takes a service end point which it will call to fetch mapping from backend service\n\n\n\n\n\n\n\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(event.target);\n  console.log(\"handleSubmit: \" + JSON.stringify(formDataToObject(formData)));\n}\n\nconst AForm = props => {\n  let defaultModeMapping = {\n    readOnly: \"readOnly\",\n    edit: \"edit\",\n    hidden: \"hidden\",\n    disabled: \"disabled\",\n    create: \"edit\",\n    read: \"readOnly\",\n    view: \"readOnly\",\n    update: \"edit\"\n  };\n\n  const fetchDefaultModeMapping = () => {\n    /*this is a mock method that returns a fixed result for testing - to be replaced with an actual service call from props.defaultModeMappingService*/\n    return {\n      review: \"readOnly\",\n      reopened: \"edit\"\n    };\n  };\n\n  let defaultModeMappingFromService;\n  if (props.defaultModeMappingService !== undefined) defaultModeMappingFromService = fetchDefaultModeMapping();\n  /* Merge mappings based on the following precedence: \n    1) props.defaultModeMapping (mappings from props), \n    2) defaultModeMappingFromService (mapping fetched from service), \n    3)defaultModeMpping (fallback mappings)\n    */\n\n  if (props.defaultModeMapping !== undefined) defaultModeMapping = { ...defaultModeMapping,\n    ...defaultModeMappingFromService,\n    ...props.defaultModeMapping\n  };\n  console.log(\"AForm - Default Mode Mapping: \" + JSON.stringify(defaultModeMapping));\n  const childrenWithAdditionalProps = React.Children.map(props.children, child => {\n    let additionalProps = {\n      default_mode_mapping: defaultModeMapping\n    };\n    if (props.defaultMode) additionalProps.default_mode = props.defaultMode;\n    if (props.defaultVariant) additionalProps.default_variant = props.defaultVariant;\n    return /*#__PURE__*/React.cloneElement(child, additionalProps);\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      width: \"100%\"\n    },\n    children: childrenWithAdditionalProps\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_c = AForm;\nexport default AForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AForm\");","map":{"version":3,"sources":["/Users/choonwheepeh/demo/src/components/aForm.js"],"names":["React","formDataToObject","handleSubmit","event","preventDefault","formData","FormData","target","console","log","JSON","stringify","AForm","props","defaultModeMapping","readOnly","edit","hidden","disabled","create","read","view","update","fetchDefaultModeMapping","review","reopened","defaultModeMappingFromService","defaultModeMappingService","undefined","childrenWithAdditionalProps","Children","map","children","child","additionalProps","default_mode_mapping","defaultMode","default_mode","defaultVariant","default_variant","cloneElement","width"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,gBAAT,QAAiC,SAAjC;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3BA,EAAAA,KAAK,CAACC,cAAN;AACA,QAAMC,QAAQ,GAAG,IAAIC,QAAJ,CAAaH,KAAK,CAACI,MAAnB,CAAjB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAmBC,IAAI,CAACC,SAAL,CAAeV,gBAAgB,CAACI,QAAD,CAA/B,CAA/B;AACD;;AAED,MAAMO,KAAK,GAAIC,KAAD,IAAW;AACvB,MAAIC,kBAAkB,GAAG;AACvBC,IAAAA,QAAQ,EAAE,UADa;AAEvBC,IAAAA,IAAI,EAAE,MAFiB;AAGvBC,IAAAA,MAAM,EAAE,QAHe;AAIvBC,IAAAA,QAAQ,EAAE,UAJa;AAKvBC,IAAAA,MAAM,EAAE,MALe;AAMvBC,IAAAA,IAAI,EAAE,UANiB;AAOvBC,IAAAA,IAAI,EAAE,UAPiB;AAQvBC,IAAAA,MAAM,EAAE;AARe,GAAzB;;AAWA,QAAMC,uBAAuB,GAAG,MAAM;AACpC;AACA,WAAO;AAAEC,MAAAA,MAAM,EAAE,UAAV;AAAsBC,MAAAA,QAAQ,EAAE;AAAhC,KAAP;AACD,GAHD;;AAKA,MAAIC,6BAAJ;AACA,MAAIb,KAAK,CAACc,yBAAN,KAAoCC,SAAxC,EACEF,6BAA6B,GAAGH,uBAAuB,EAAvD;AAEF;AACF;AACA;AACA;AACA;;AACE,MAAIV,KAAK,CAACC,kBAAN,KAA6Bc,SAAjC,EACEd,kBAAkB,GAAG,EACnB,GAAGA,kBADgB;AAEnB,OAAGY,6BAFgB;AAGnB,OAAGb,KAAK,CAACC;AAHU,GAArB;AAMFN,EAAAA,OAAO,CAACC,GAAR,CACE,mCAAmCC,IAAI,CAACC,SAAL,CAAeG,kBAAf,CADrC;AAIA,QAAMe,2BAA2B,GAAG7B,KAAK,CAAC8B,QAAN,CAAeC,GAAf,CAClClB,KAAK,CAACmB,QAD4B,EAEjCC,KAAD,IAAW;AACT,QAAIC,eAAe,GAAG;AAAEC,MAAAA,oBAAoB,EAAErB;AAAxB,KAAtB;AACA,QAAID,KAAK,CAACuB,WAAV,EAAuBF,eAAe,CAACG,YAAhB,GAA+BxB,KAAK,CAACuB,WAArC;AACvB,QAAIvB,KAAK,CAACyB,cAAV,EACEJ,eAAe,CAACK,eAAhB,GAAkC1B,KAAK,CAACyB,cAAxC;AAEF,wBAAOtC,KAAK,CAACwC,YAAN,CAAmBP,KAAnB,EAA0BC,eAA1B,CAAP;AACD,GATiC,CAApC;AAYA,sBACE;AAAM,IAAA,QAAQ,EAAEhC,YAAhB;AAA8B,IAAA,KAAK,EAAE;AAAEuC,MAAAA,KAAK,EAAE;AAAT,KAArC;AAAA,cACGZ;AADH;AAAA;AAAA;AAAA;AAAA,UADF;AAKD,CAtDD;;KAAMjB,K;AAwDN,eAAeA,KAAf","sourcesContent":["import React from \"react\";\nimport { formDataToObject } from \"./utils\";\n\n\n/*\nDefault Mode\nAForm will communicate to all its field children which mode to render by default. This allow the convinience of setting \nthe default render mode for its field children if the children does not have its own mode or settings provided. \nThis way we don't need to specify mode for every single field repeatedly if most fields should be rendered in a similar \nrender mode. Functional mode mapping to render mode also allow is to define custom functional mode mappings based on functional \nFunctional mode can support custom values (as long as corresponding mappings are provides) but render mode does not s\nupport custom values (since the field would not know what to actually render), so the only supported render mode values \nare [\"readOnly\"|\"edit\"|\"disabled\"|\"hidden\"].\n\nAForm gets can get mappings via \n1) defaultModeMapping prop that is passed in, \n2) via calling a backend service specified by the defaultModeMappingService\n3) predefined fallback mappings\nthe mappings are then merged in the above order of precedence when there are duplicate functional modes in the mapping. \nThis means that if the defaultModeMapping from prop and from the mapping via the service have the same functional prop defined, \nthe functional mode mapping defined by the defaultModeMapping from props will override the same mapping from the service.\n\ndefaultModeMapping: allow mappings to be specified in via props. modeMapping is an object that is used like a map. \nEach property name is the functional mode and the property value is the render mode that the field need to render.\n\ndefaultModeMappingService: takes a service end point which it will call to fetch mapping from backend service\n\n\n\n\n\n\n\n*/\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(event.target);\n  console.log(\"handleSubmit: \" + JSON.stringify(formDataToObject(formData)));\n}\n\nconst AForm = (props) => {\n  let defaultModeMapping = {\n    readOnly: \"readOnly\",\n    edit: \"edit\",\n    hidden: \"hidden\",\n    disabled: \"disabled\",\n    create: \"edit\",\n    read: \"readOnly\",\n    view: \"readOnly\",\n    update: \"edit\",\n  };\n\n  const fetchDefaultModeMapping = () => {\n    /*this is a mock method that returns a fixed result for testing - to be replaced with an actual service call from props.defaultModeMappingService*/\n    return { review: \"readOnly\", reopened: \"edit\" };\n  };\n\n  let defaultModeMappingFromService;\n  if (props.defaultModeMappingService !== undefined)\n    defaultModeMappingFromService = fetchDefaultModeMapping();\n\n  /* Merge mappings based on the following precedence: \n    1) props.defaultModeMapping (mappings from props), \n    2) defaultModeMappingFromService (mapping fetched from service), \n    3)defaultModeMpping (fallback mappings)\n    */\n  if (props.defaultModeMapping !== undefined)\n    defaultModeMapping = {\n      ...defaultModeMapping,\n      ...defaultModeMappingFromService,\n      ...props.defaultModeMapping,\n    };\n\n  console.log(\n    \"AForm - Default Mode Mapping: \" + JSON.stringify(defaultModeMapping)\n  );\n\n  const childrenWithAdditionalProps = React.Children.map(\n    props.children,\n    (child) => {\n      let additionalProps = { default_mode_mapping: defaultModeMapping };\n      if (props.defaultMode) additionalProps.default_mode = props.defaultMode;\n      if (props.defaultVariant)\n        additionalProps.default_variant = props.defaultVariant;\n\n      return React.cloneElement(child, additionalProps);\n    }\n  );\n\n  return (\n    <form onSubmit={handleSubmit} style={{ width: \"100%\" }}>\n      {childrenWithAdditionalProps}\n    </form>\n  );\n};\n\nexport default AForm;\n"]},"metadata":{},"sourceType":"module"}